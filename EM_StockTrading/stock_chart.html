<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TradingView Fullscreen Chart</title>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #f1f3f6;
      font-family: Arial, sans-serif;
    }
    #container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
    }
    #error {
      position: absolute;
      top: 40%;
      width: 100%;
      text-align: center;
      color: red;
      font-size: 18px;
    }
  </style>
</head>
<body>

  <div id="container"></div>
  <div id="error"></div>

  <script>
    // --- Get 'ticker' from URL query ---
    const params = new URLSearchParams(window.location.search);
    const ticker = params.get("ticker");

    if (!ticker) {
      document.getElementById("error").textContent =
        "Error: Please provide ?ticker=SYMBOL in the URL (e.g. chart.html?ticker=AAPL)";
    } else {
      renderWidget(ticker.toUpperCase());
    }

    // --- Render TradingView Widget ---
    function renderWidget(ticker) {
      const containerId = `tradingview_${ticker}`;
      const container = document.getElementById("container");
      const div = document.createElement("div");
      div.id = containerId;
      div.style.width = "100%";
      div.style.height = "100%";
      container.appendChild(div);

      new TradingView.widget({
            "width": "100%",
            "height": "100%",
            "symbol": ticker,
            "interval": "D",
            "timezone": "America/New_York",
            "theme": "light",
            "style": "1",
            "locale": "en",
            "toolbar_bg": "#f1f3f6",
            "enable_publishing": false,
            "withdateranges": true,
            "hide_side_toolbar": false,
            "allow_symbol_change": true,
            "container_id": containerId,
            "studies": [
                "RSI@tv-basicstudies",
                "MASimple@tv-basicstudies"
            ],
            "scalesPosition": "right"
        });
    }
  </script>

</body>
</html>
